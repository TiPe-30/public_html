<?php
// Controleur pour l'action sur les articles
// 
// Inclusion du framework
include_once("framework/view.fw.php");
// Inclusion du modèle
include_once("model/Article.class.php");

// 
//
///////////////////////////////////////////////////////////////////////////////
// Partie récupération des données
///////////////////////////////////////////////////////////////////////////////

// Récupère la référence de l'article en cours
$ref = $_SESSION['ref'];

///////////////////////////////////////////////////////////////////////////////
// Partie calculs avec le modèle
///////////////////////////////////////////////////////////////////////////////


// On supprime l'article
// Récupère l'article
$article = Article::read($ref);

// Le supprime
$article->delete();
// Le supprime de la session
unset($_SESSION['ref']);

$message = "L'article ref '$ref' a été supprimé";

////////////////////////////////////////////////////////////////////////////
// Construction de la vue
////////////////////////////////////////////////////////////////////////////
$view = new View();

$view->assign('message',$message);
$view->display('message');

// 
?>
